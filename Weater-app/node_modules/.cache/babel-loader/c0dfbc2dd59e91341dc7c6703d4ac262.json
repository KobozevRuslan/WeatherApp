{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst API_KEY = 'd6487c851d4294ca86263fcb2861f71f';\nconst URL = 'https://api.openweathermap.org/data/2.5/weather'; //action\n\nexport const fetchWeatherAction = createAsyncThunk('weather/fetch', async (payload, {\n  rejectWithValue,\n  getState,\n  dispatch\n}) => {\n  try {\n    const {\n      data\n    } = await axios.get(URL, {\n      params: {\n        q: payload,\n        units: 'metric',\n        APPID: API_KEY,\n        lang: 'ru'\n      }\n    });\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error === null || error === void 0 ? void 0 : error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //slice\n\nconst weatherSlice = createSlice({\n  name: 'weather',\n  initialState: {},\n  extraReducers: builder => {\n    //pending\n    builder.addCase(fetchWeatherAction.pending, state => {\n      state.isLoading = true;\n    }); //fulfilled\n\n    builder.addCase(fetchWeatherAction.fulfilled, (state, action) => {\n      state.weather = action === null || action === void 0 ? void 0 : action.payload;\n      state.languege = action === null || action === void 0 ? void 0 : action.languege;\n      state.isLoading = false;\n      state.error = undefined;\n    }); //rejected\n\n    builder.addCase(fetchWeatherAction.rejected, (state, action) => {\n      state.isLoading = false;\n      state.weather = undefined;\n      state.error = action === null || action === void 0 ? void 0 : action.payload;\n      state.languege = action === null || action === void 0 ? void 0 : action.languege;\n    });\n  }\n});\nexport default weatherSlice.reducer;","map":{"version":3,"sources":["/home/cmdb-123844/Desktop/WeatherApp/Weater-app/src/redux/slices/weatherSlices.js"],"names":["createAsyncThunk","createSlice","axios","API_KEY","URL","fetchWeatherAction","payload","rejectWithValue","getState","dispatch","data","get","params","q","units","APPID","lang","error","response","weatherSlice","name","initialState","extraReducers","builder","addCase","pending","state","isLoading","fulfilled","action","weather","languege","undefined","rejected","reducer"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG,kCAAhB;AACA,MAAMC,GAAG,GAAG,iDAAZ,C,CAEA;;AACA,OAAO,MAAMC,kBAAkB,GAAGL,gBAAgB,CAChD,eADgD,EAEhD,OAAOM,OAAP,EAAgB;AAAEC,EAAAA,eAAF;AAAmBC,EAAAA,QAAnB;AAA6BC,EAAAA;AAA7B,CAAhB,KAA4D;AAC1D,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMR,KAAK,CAACS,GAAN,CAAUP,GAAV,EAAe;AACpCQ,MAAAA,MAAM,EAAE;AACNC,QAAAA,CAAC,EAAEP,OADG;AAENQ,QAAAA,KAAK,EAAE,QAFD;AAGNC,QAAAA,KAAK,EAAEZ,OAHD;AAINa,QAAAA,IAAI,EAAE;AAJA;AAD4B,KAAf,CAAvB;AAQA,WAAON,IAAP;AACD,GAVD,CAUE,OAAOO,KAAP,EAAc;AAAA;;AACd,QAAI,EAACA,KAAD,aAACA,KAAD,uBAACA,KAAK,CAAEC,QAAR,CAAJ,EAAsB;AACpB,YAAMD,KAAN;AACD;;AACD,WAAOV,eAAe,CAACU,KAAD,aAACA,KAAD,0CAACA,KAAK,CAAEC,QAAR,oDAAC,gBAAiBR,IAAlB,CAAtB;AACD;AACF,CAnB+C,CAA3C,C,CAsBP;;AACA,MAAMS,YAAY,GAAGlB,WAAW,CAAC;AAC/BmB,EAAAA,IAAI,EAAE,SADyB;AAE/BC,EAAAA,YAAY,EAAE,EAFiB;AAG/BC,EAAAA,aAAa,EAAGC,OAAD,IAAa;AAC1B;AACAA,IAAAA,OAAO,CAACC,OAAR,CAAgBnB,kBAAkB,CAACoB,OAAnC,EAA6CC,KAAD,IAAW;AACrDA,MAAAA,KAAK,CAACC,SAAN,GAAkB,IAAlB;AACD,KAFD,EAF0B,CAK1B;;AACAJ,IAAAA,OAAO,CAACC,OAAR,CAAgBnB,kBAAkB,CAACuB,SAAnC,EAA8C,CAACF,KAAD,EAAQG,MAAR,KAAmB;AAC/DH,MAAAA,KAAK,CAACI,OAAN,GAAgBD,MAAhB,aAAgBA,MAAhB,uBAAgBA,MAAM,CAAEvB,OAAxB;AACAoB,MAAAA,KAAK,CAACK,QAAN,GAAiBF,MAAjB,aAAiBA,MAAjB,uBAAiBA,MAAM,CAAEE,QAAzB;AACAL,MAAAA,KAAK,CAACC,SAAN,GAAkB,KAAlB;AACAD,MAAAA,KAAK,CAACT,KAAN,GAAce,SAAd;AACD,KALD,EAN0B,CAY1B;;AACAT,IAAAA,OAAO,CAACC,OAAR,CAAgBnB,kBAAkB,CAAC4B,QAAnC,EAA6C,CAACP,KAAD,EAAQG,MAAR,KAAmB;AAC9DH,MAAAA,KAAK,CAACC,SAAN,GAAkB,KAAlB;AACAD,MAAAA,KAAK,CAACI,OAAN,GAAgBE,SAAhB;AACAN,MAAAA,KAAK,CAACT,KAAN,GAAcY,MAAd,aAAcA,MAAd,uBAAcA,MAAM,CAAEvB,OAAtB;AACAoB,MAAAA,KAAK,CAACK,QAAN,GAAiBF,MAAjB,aAAiBA,MAAjB,uBAAiBA,MAAM,CAAEE,QAAzB;AAED,KAND;AAOD;AAvB8B,CAAD,CAAhC;AA0BA,eAAeZ,YAAY,CAACe,OAA5B","sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nconst API_KEY = 'd6487c851d4294ca86263fcb2861f71f';\nconst URL = 'https://api.openweathermap.org/data/2.5/weather';\n\n//action\nexport const fetchWeatherAction = createAsyncThunk(\n  'weather/fetch',\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    try {\n      const { data } = await axios.get(URL, {\n        params: {\n          q: payload,\n          units: 'metric',\n          APPID: API_KEY,\n          lang: 'ru',\n        },\n      });\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//slice\nconst weatherSlice = createSlice({\n  name: 'weather',\n  initialState: {},\n  extraReducers: (builder) => {\n    //pending\n    builder.addCase(fetchWeatherAction.pending, (state) => {\n      state.isLoading = true;\n    });\n    //fulfilled\n    builder.addCase(fetchWeatherAction.fulfilled, (state, action) => {\n      state.weather = action?.payload;\n      state.languege = action?.languege;\n      state.isLoading = false;\n      state.error = undefined;\n    });\n    //rejected\n    builder.addCase(fetchWeatherAction.rejected, (state, action) => {\n      state.isLoading = false;\n      state.weather = undefined;\n      state.error = action?.payload;\n      state.languege = action?.languege;\n\n    });\n  },\n});\n\nexport default weatherSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}